(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-55dcf406"],{"129f":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},"14c3":function(e,t,n){var o=n("c6b6"),r=n("9263");e.exports=function(e,t){var n=e.exec;if("function"===typeof n){var l=n.call(e,t);if("object"!==typeof l)throw TypeError("RegExp exec method returned something other than an Object or null");return l}if("RegExp"!==o(e))throw TypeError("RegExp#exec called on incompatible receiver");return r.call(e,t)}},"841c":function(e,t,n){"use strict";var o=n("d784"),r=n("825a"),l=n("1d80"),s=n("129f"),a=n("14c3");o("search",1,(function(e,t,n){return[function(t){var n=l(this),o=void 0==t?void 0:t[e];return void 0!==o?o.call(t,n):new RegExp(t)[e](String(n))},function(e){var o=n(t,e,this);if(o.done)return o.value;var l=r(e),i=String(this),p=l.lastIndex;s(p,0)||(l.lastIndex=0);var c=a(l,i);return s(l.lastIndex,p)||(l.lastIndex=p),null===c?-1:c.index}]}))},9263:function(e,t,n){"use strict";var o=n("ad6d"),r=n("9f7f"),l=n("5692"),s=RegExp.prototype.exec,a=l("native-string-replace",String.prototype.replace),i=s,p=function(){var e=/a/,t=/b*/g;return s.call(e,"a"),s.call(t,"a"),0!==e.lastIndex||0!==t.lastIndex}(),c=r.UNSUPPORTED_Y||r.BROKEN_CARET,u=void 0!==/()??/.exec("")[1],d=p||u||c;d&&(i=function(e){var t,n,r,l,i=this,d=c&&i.sticky,f=o.call(i),h=i.source,m=0,g=e;return d&&(f=f.replace("y",""),-1===f.indexOf("g")&&(f+="g"),g=String(e).slice(i.lastIndex),i.lastIndex>0&&(!i.multiline||i.multiline&&"\n"!==e[i.lastIndex-1])&&(h="(?: "+h+")",g=" "+g,m++),n=new RegExp("^(?:"+h+")",f)),u&&(n=new RegExp("^"+h+"$(?!\\s)",f)),p&&(t=i.lastIndex),r=s.call(d?n:i,g),d?r?(r.input=r.input.slice(m),r[0]=r[0].slice(m),r.index=i.lastIndex,i.lastIndex+=r[0].length):i.lastIndex=0:p&&r&&(i.lastIndex=i.global?r.index+r[0].length:t),u&&r&&r.length>1&&a.call(r[0],n,(function(){for(l=1;l<arguments.length-2;l++)void 0===arguments[l]&&(r[l]=void 0)})),r}),e.exports=i},"9f7f":function(e,t,n){"use strict";var o=n("d039");function r(e,t){return RegExp(e,t)}t.UNSUPPORTED_Y=o((function(){var e=r("a","y");return e.lastIndex=2,null!=e.exec("abcd")})),t.BROKEN_CARET=o((function(){var e=r("^r","gy");return e.lastIndex=2,null!=e.exec("str")}))},ac1f:function(e,t,n){"use strict";var o=n("23e7"),r=n("9263");o({target:"RegExp",proto:!0,forced:/./.exec!==r},{exec:r})},ad6d:function(e,t,n){"use strict";var o=n("825a");e.exports=function(){var e=o(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},d4ec:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,"a",(function(){return o}))},d784:function(e,t,n){"use strict";n("ac1f");var o=n("6eeb"),r=n("9263"),l=n("d039"),s=n("b622"),a=n("9112"),i=s("species"),p=RegExp.prototype,c=!l((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),u=function(){return"$0"==="a".replace(/./,"$0")}(),d=s("replace"),f=function(){return!!/./[d]&&""===/./[d]("a","$0")}(),h=!l((function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var n="ab".split(e);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));e.exports=function(e,t,n,d){var m=s(e),g=!l((function(){var t={};return t[m]=function(){return 7},7!=""[e](t)})),R=g&&!l((function(){var t=!1,n=/a/;return"split"===e&&(n={},n.constructor={},n.constructor[i]=function(){return n},n.flags="",n[m]=/./[m]),n.exec=function(){return t=!0,null},n[m](""),!t}));if(!g||!R||"replace"===e&&(!c||!u||f)||"split"===e&&!h){var v=/./[m],b=n(m,""[e],(function(e,t,n,o,l){var s=t.exec;return s===r||s===p.exec?g&&!l?{done:!0,value:v.call(t,n,o)}:{done:!0,value:e.call(n,t,o)}:{done:!1}}),{REPLACE_KEEPS_$0:u,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:f}),x=b[0],U=b[1];o(String.prototype,e,x),o(p,m,2==t?function(e,t){return U.call(e,this,t)}:function(e){return U.call(e,this)})}d&&a(p[m],"sham",!0)}},ff20:function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-row",[n("el-col",{attrs:{span:24}},[n("router-link",{attrs:{to:{name:"AppManagement"}}},[n("i",{staticClass:"el-icon-caret-left"}),e._v(e._s(e.appName)+" ")])],1)],1),n("hr"),n("el-row",[n("el-col",{attrs:{span:24}},[n("h1",[e._v("App Role List")])])],1),n("hr"),n("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.addAppUserRole}},[e._v(" Add ")]),n("hr"),n("el-input",{attrs:{size:"mini",placeholder:"filter"},on:{change:e.search,keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search.apply(null,arguments)}},model:{value:e.searchWords,callback:function(t){e.searchWords=t},expression:"searchWords"}}),n("el-table",{attrs:{data:e.appUserRoleFilteredList,"default-sort":{prop:"username",order:"descending"}}},[n("el-table-column",{attrs:{fixed:"left",label:"Action",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return e.edit(t.row)}}},[n("i",{staticClass:"el-icon-edit"}),e._v(" Edit ")]),n("el-button",{attrs:{type:"text",size:"small"},on:{click:function(n){return e.deleteConfirm(t.row)}}},[n("i",{staticClass:"el-icon-s-custom"}),e._v(" Delete ")])]}}])}),n("el-table-column",{attrs:{prop:"username",label:"Username",width:"200",sortable:""}}),n("el-table-column",{attrs:{prop:"displayName",label:"User Display Name",width:"200",sortable:""}}),n("el-table-column",{attrs:{prop:"appRole",label:"App Role",width:"200",sortable:""}})],1),n("hr"),n("div",[n("el-dialog",{attrs:{title:"Delete Confirm",visible:e.dialogVisible,width:"30%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("span",[e._v(e._s(this.deleteMsg))]),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("Cancel")]),n("el-button",{attrs:{type:"primary"},on:{click:e.deleteAppUserRole}},[e._v("Delete")])],1)])],1),n("div",[n("app-role-form",{attrs:{dialogVisible:e.appRoleFormShow,propAppUserRole:e.appUserRole},on:{closeAppRoleForm:e.closeAppRoleFormShow}})],1)],1)},r=[],l=(n("4de4"),n("caad"),n("2532"),n("159b"),n("ac1f"),n("841c"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("el-dialog",{attrs:{title:"App Role",visible:e.dialogVisible,"close-on-press-escape":!0,"before-close":function(){e.close(!0)},width:"600px"},on:{"update:visible":function(t){e.dialogVisible=t}}},[n("el-form",{ref:"appRoleForm",attrs:{model:e.appUserRole,rules:e.rules}},[n("el-form-item",{attrs:{label:"Username",prop:"username",required:""}},[n("el-select",{attrs:{filterable:"",placeholder:"username","filter-method":e.filterUsername},model:{value:e.appUserRole.username,callback:function(t){e.$set(e.appUserRole,"username",t)},expression:"appUserRole.username"}},e._l(e.filteredUsernameList,(function(e){return n("el-option",{key:e.username,attrs:{label:e.username+" "+e.displayName+" "+e.email,value:e.username}})})),1)],1),n("el-form-item",{attrs:{label:"App Role",prop:"appRole",required:""}},[n("el-input",{model:{value:e.appUserRole.appRole,callback:function(t){e.$set(e.appUserRole,"appRole",t)},expression:"appUserRole.appRole"}})],1)],1),n("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(){e.close(!0)}}},[e._v("Cancel")]),n("el-button",{attrs:{type:"primary"},on:{click:e.save}},[e._v("Save")])],1)],1)],1)}),s=[],a={name:"AppRoleForm",props:{dialogVisible:Boolean,propAppUserRole:Object},data:function(){var e=function(e,t,n){var o=/^[0-9a-zA-Z]+$/;o.test(t)?n():n(new Error("should only contain letter and number"))};return{appUserRole:{},rules:{username:[{required:!0,message:"value cannot be empty",trigger:"blur"},{validator:e,trigger:"blur"}],appRole:[{required:!0,message:"value cannot be empty",trigger:"blur"},{validator:e,trigger:"blur"}]},usernameList:[],filteredUsernameList:[],axiosConfig:{},webApi:"/ssomanagement/"}},computed:{},mounted:function(){this.appUserRole=Object.assign({},this.propAppUserRole),this.usernameList=this.$store.state.usernameList,this.filteredUsernameList=this.usernameList,this.axiosConfig=this.$store.state.axiosConfig},methods:{close:function(e){this.$emit("closeAppRoleForm",e)},save:function(e){var t=this;e.preventDefault(),this.$refs["appRoleForm"].validate((function(e){if(!e)return console.log("error submit!!"),!1;t.$http.post(t.webApi+"api/role/",t.appUserRole,t.axiosConfig).then((function(e){console.log(e.data),t.close(!0)})).catch((function(e){console.log(e)}))}))},back:function(e){e.preventDefault(),this.close(!1)},filterUsername:function(e){if(console.log("filter username:"+e),""!=e){var t=e.toLowerCase();this.filteredUsernameList=this.usernameList.filter((function(e){return!(null==e.displayName||!e.displayName.toLowerCase().includes(t))||(!(null==e.username||!e.username.toLowerCase().includes(t))||!(null==e.email||!e.email.toLowerCase().includes(t)))}))}}},components:{},watch:{propAppUserRole:function(e){this.appUserRole=Object.assign({},e)}}},i=a,p=n("2877"),c=Object(p["a"])(i,l,s,!1,null,null,null),u=c.exports,d=n("d4ec"),f=function e(){Object(d["a"])(this,e),this.id=null,this.appId=null,this.username=null,this.appRole=null},h={name:"AppRoleManagement",props:{appName:String},data:function(){return{appId:null,appUserRoleList:[],appUserRoleFilteredList:[],axiosConfig:{},loginInfo:{},deleteMsg:null,deleteId:null,dialogVisible:!1,appRoleFormShow:!1,appUserRole:{},searchWords:"",usernameMap:{},webApi:"/ssomanagement/"}},mounted:function(){this.axiosConfig=this.$store.state.axiosConfig,this.loginInfo=this.$store.state.loginInfo,this.appId=this.$route.params.appId,this.usernameMap=this.$store.state.usernameMap,this.appUserRole=new f,this.fetchRecord()},computed:{},methods:{search:function(){var e=this;this.appUserRoleFilteredList=this.appUserRoleList.filter((function(t){return""==e.searchWords||(null!=t.displayName&&t.displayName.includes(e.searchWords)||null!=t.username&&t.username.includes(e.searchWords)||null!=t.appRole&&t.appRole.includes(e.searchWords))}))},fetchRecord:function(){var e=this;return this.$http.get(this.webApi+"api/app/"+this.appId+"/role",this.axiosConfig).then((function(t){console.log(t),e.appUserRoleList=t.data,e.appUserRoleList.forEach((function(t){null!=e.usernameMap[t.username]?t.displayName=e.usernameMap[t.username].displayName:t.displayName="ERROR"})),e.appUserRoleFilteredList=e.appUserRoleList})).catch((function(e){console.log(e)}))},deleteAppUserRole:function(e){var t=this;e.preventDefault(),this.$http.delete(this.webApi+"api/role/"+this.deleteId,this.axiosConfig).then((function(){t.fetchRecord(),t.dialogVisible=!1})).catch((function(e){console.log(e)}))},deleteConfirm:function(e){this.showPopup(e.username,e.appRole,e.id)},edit:function(e){console.log(e),this.appUserRole=e,this.appRoleFormShow=!0},showPopup:function(e,t,n){this.deleteMsg="Are you sure to delete record:"+e+" "+t,this.deleteId=n,this.dialogVisible=!0},closeAppRoleFormShow:function(e){var t=this;!0===e&&this.fetchRecord().then((function(){return t.search()})),this.appRoleFormShow=!1},addAppUserRole:function(){this.appUserRole=new f,this.appUserRole.appId=this.appId,this.appRoleFormShow=!0}},components:{"app-role-form":u},watch:{$route:function(){this.fetchRecord()}}},m=h,g=Object(p["a"])(m,o,r,!1,null,null,null);t["default"]=g.exports}}]);
//# sourceMappingURL=chunk-55dcf406.0d8bdd1a.js.map